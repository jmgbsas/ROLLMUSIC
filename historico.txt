- 06-03-2024 ya tengo menu popup contextual en lista de pìstas de cancion
  estos menus popup contextual lo podremos usar en muchos lados,
  primero se da click izquierdo para seleccionar la lista de Pistas y luego click
  derecho , no se porque funciona asi porque WM_RBUTTONDOWN selecciona tambien
  la lista, debe ser porque eventgadget se fija en el click izquierdo
  del mouse entonces no hay seleccion de la ventna de la lista si no
  se da primero click izquierdo , y luego al dar click derecho ya estamos
  con la lista seleccionada ,,,,ufff retorcida la cosa pero lo descubri..
  Si se da click izquierdo y no derecho luego no se puede cerrar Rollmusic
  desde menu pero si desde el boton de ventana de cierre o desde Roll Grafico
  con escape o boton rojo de cierre..
  LA tool de Rusia se basa en click izquierdo esa es mi conclusion..
- 05-03-3024 arreglos del meu principal ventana control, habilitar deshabilitar
  opciones de cara de Roll grafico. Consumo cpu eñevadp se aumento retardos 
  de nuevo en loops de Ventana Control y RollLoop..Queda probar Grabacion y ejecucion
  midi por ajustar variable repro=0 en play cancion al final... pensando
  que afectaba el consumo cpupornocerrar los ports en algunas condiciones de play
  cancion,,, ¿deberia cerrarlo siempre como antes? queda la duda probar...
  Algun dia debo probar todas las funciones de Rollmusic ...mucho laburo..
  por eso sera alfa por mucho tiempo.....por mas que avance lo viejo no se
  si anda bien ya no lo usé ni se como anda,,,bugs debe haber seguro 
  otra cosa eso del clickeo virtual del mouse LEFTDOWN y LEFTUP
  lo comenté no se si afectará ahora...No documente porque lo puse
  es para que permanesca en pantalla o ejecute lo pedido no estoy seguro
  no lo comente en el codigo,,,
- 04-03-2024
  Ya Podiamos cargar una cancion sin Roll, y ahora cargar el Roll grafico
  mediante comando batch y ver toda la cancion eschcuarla entera o por partes
  en un Roll grafico externo, el cual  se puede cerrar sin que se cierre
  la ventana de control, arreglo de menu archivo
- PATCH Y PORTSAL EN VENTANA CTRL corregido... a veces cancela al
  cerrar la ventana Ctrl desde la X superior derecha,,,,
- 28-feb-a 1-mar. Ya cargamos cancion sin roll grafico y lo ejecutamos
  Y se puede levantar roll grafico despues, por si se desea verlo
  o modificarlo,, pero una vez abierto no lo  puedo cerrar por ahora 
  Screenres cierra com 0,0,0,0 como argumeto
  en un programa aislado pero la superficie de cairo no la puedo destruir
  queda una ventana negra que no la `puedo eliminar...seguire intentando 
  ufff...
- 26-27-FEB-2024 - VERSION ANTERIOR NO TIENE EL PROBLEMA DE SOLAPAMIENTO
  de la ventana de seleccion de port sal...chequeando!NO SEPUEDE USAR MAS
  DE UN BOTON A LA VEZ O NO SE COMO SE HACE,,todas las selecciones se hacen con un boton
  y cancela cerrando la ventana.
- 25 feb 2024- probe IUP tampoco sirve no sepuede hacer vectores dinamicos
  par recorrer con datos de una lista y si defefinem em un scope con VAR
  no los ve en otro la mezcla de freebasic con iup es una bosta,
  aunque tuve4 que definir un nro estatico fijo de port de salida
  al menos FLTK permite avanzar veremos, sino seguiremos buscando otras GUI 
  o terminare usando forms de windows a lo cual me resisto..(fbgui, glwf etc)
- 18-02-2024 ERROR: al cargar una cancion y luego tratar de cambiar un port
  o solo verlo con selport boton portsal, luego de hacerlo y cargar ora cancion
  la lisbox permanece con los valores anteriores y si eran blancos por usar
  selport sin inguna cancion, al cargar una cancon sigue en blanco
  parece que listview no encontre la forma que no afecte a la listbox
  de la ventana principal,,probe de todo, me canse y la solucion parece
  usar FLTK. , podria usar una consola pero igual cancela por ya tener 
  usa pantalla grafica screenres que no permite que haya otra o sino deberia
  hacerce una libreria *.dll y no tengo ganas,,,,intentamos hacer una listview
  o listbox con check box para mostrar los ports y el usuario lo seleccione.
  (comienzo de uso de FLTK!) 
-14-02-2024 PENDIENTE:en Rollmusic Ctrl la ventana de Control los parametros de cancion
 su seleccion port patch canal no estan terminados por eso no funcionan bien
 terminarlos..Tratar de lograr se lo hizo por un instante de que funcione
 la carga de cancion sin necesidad de levantar el grafico de Roll y podercargar 
 canciones y escucharlas sin modificarlas ni tener el editor Roll grafico
 funcionanado...!! Lo logre por un momento pero lo perdi porque no funcionaba 
 otra parte y cambie y lo perdi no supe bien que es loque lo hizo funcionar,ja

-13-02-2024 correcciones agregar boton cancela en selecciones de parametros
-12-02-2024 hice compialacion sin debug para enviar un ejecutable tipo release
-21-06-2022 se graba una ejec con un roll cargado..es inestable...hace falta mas pruebas.
 la pista nueva ejecutada se escucha bien con el instrumento elegido.
-12-06-2022 arrastre de ventana desde cinta perfecto.- Comienso de Syncronizacion cancion y ejec.
  la sincro funciona solo que todavia no graba el archivo de ejec si hay una cancion o roll cargado,,,
-09-06-2022 Habilitar metronomo para grabar ejecuciones por teclado sin entorno grafico. (Boton Rojo)
-08-06-2022 control sobre listoutCreado(), listinCreado () 0.4566. Cargar ejecuciones desde
 Cargar pistas MIDI-IN tenia varios errores. Modificacion se puede seleccionar portsal,patch o canal
 teniendo un nombre de pista nuevo al apretar grabar ROJO y seleccionado por su puesto, pero
 sin necesidad de seleccionar 'S' o sea portsal,patch y canal se peuden cambiar con 'S' o 'G' chequeados
 Se corrigio NombreCancion para este caso agregaba unabarra al final "\" al no entrar por Directorio
de cancion. (falta mas pruebas supongo)
-07-06-2022 no se puede enviar un patch a traves de un cable midi interno como LoopBe Internal MIDI 
 se anula esa posibilidad en PlayTocaAll sino se bloquea la salida del LoopBe Internal MIDI.
 Si hubiese otros cables midi internos se deberia agregar ...
-07-06-2022 correccion portout note off de mycallback entrada teclado, portsal ejec por menu
-07-06-2022 MENU-DISPOSITIVOS. ABRE CIERRA MIDI-OUT. Conesta version altocar teclado en una pista seleccionada
de ejecucion se escuchara el patch selecciondo abriendo el MIDI-IN en menu Reproducir midi-in. PArapasar a otro
1erose cierra elmidi-in seleccionado,se deseleciona, se selecciona otra pista y se vuelve abrir el midi-in.
Por hora tocamos en una pista por vez desde midi-in. directorio de cancion 05-05-2022 es una prueba de ejecuciones
con el port 0 en CoolSfot VirtualMidiSynthcon SF2 FluidR3_GM.SF2 se usa pista 1 y 2 patch 27 y el 3 con 43 creo un cello.
-14-05-2022 Ya enuna Ejec una misma pista se puede ir cambiando al port que se desee,,,los va abriendo y dejando
abiertos pero nunca los vuelve a abrir si estan abiertos. Empezamos el menu Dispositivos, para manejar 
Midi-In Midi-out. Ojo si los abro manualmente por este menu deberia haber una pista en edicion si se desea que los
valores se graben en la pista. O sea con una pista nueva conviene abrir los ports desde el Boton [PorSal]. De esa forma
se graba en el archivos de la pista el valor del PorSal usado. Tambiense grabara  si luego al crear la pista asigno ports
con ese mismo boton..pero si no se hace no se graba nada en el archivo.
-13-05-2022 Correccion SelcanalEjec , Selcanal ,SelInstodenNum..etc. Pista Roll y Ejec pueden tocar juntas,lo que pasa
 es que cuando termina alguna de ellas cierra el portSal y envia SoundOff y corta todo...para que cooxitan no deben
 hacerlo si esta ejecutando el PlayAll o PlayCancion o PlayTocaAll...solo cuando terminen todas las que esten tocando
 se enviara el cierre del port y el soundOff...Me parece que no voy a cerrar mas los ports que se abrieron..
 O sea cuando se abre un PortSal por cualquier causa no se cierra mas,salvo cierre expreso del usuario, ocarga de una cancion
diferente o pista diferente,creo que deberia agregar como todos lo hacen un menu para abrir ports y cerrar a gusto,,,
Pero durante la carga de un archivo de ejec o Roll o otra  cancion los ports se deben abrir automaticamente,,,,
-12-05-2022 allSoundOff agregado al final del play de ejecuciones
-11-05-2022 ya se peude seleccionar patch en las pistas de ejecucion de teclado,probado,portodispositivo tambien
 pero no esta probado...ando con menor tiempo estos updates seran cada semana mas o menso
-03-05-2022 0.4561 borra listBox de ejecuciones al cargar,asi podemos cargar varias seguidas...
-01-05-2022 ver 0.4560 MIDI-IN guardar ejecuciones por teclado a archivo y poder recuperrarlas
-12-04-2022 MIDI-IN grabacion desde teclado en la edicion manual de ROLL. Metrónomo
para guia de ritmo. 
-03-04-2022 [2da etapa] MIDI-IN PORT=0 GRABACION EN VARIAS PISTAS, GRABACION ESCUCHANDO LO GRABADO ANTERIORMENTE
 OK.
-30-03-2022 [1er etapa] MIDI-IN SIN LEVANTAR ROLL Grafico, habilitar entrada por teclado del sonido default
 del port default. En mi caso Virtualsynth Acoustic piano,,,se puede tocar el teclado y oir su salida.
 Ya tenemos MIDI-IN..2D ETAPA,,,empezar a llevar lso datos a un track de ejecucion ,,,,
-26-03-2022 Botones Parar y Tocar (negro y verde) de cancion habilitados. Parar tambien detiene pista aislada.
 terminado lo basico para seguir con MIDI Input.
-26-03-2022 FrontEnd: Con mspaint dibuje bmp y los usaré para controlar [ parar grabar y ejecutar]
-25-03-2022 Se habilito entradas midi de input y su seleccion.(se preparó los vectores, comienza el desarrollo
 de grabar la ejecucion real por teclado y luego reproducirla en paralelo a las pistas midi manual o
pasar una performance real cuantificada a una pista manual...tiempo de desarrollo ..to be continued,,,
-24-04-2022 Fix mover ventana de Roll estaba nuevamente inestable se ajusto para un movimiento mas acorde,
-23-03-2022 Se puede usar uan sola pista con repeticiones y toda al cancion hara las repeticiones
probado con pista 1 pero podria estar la repeticion en cualqueir pista...
Se setea igual que con una pista sola. Tambien responde bien a un loop infinito
solo o con una repeticion interna al loop. se detiene siemrep con P se elimina
el loop infinito con Q como siempre. (habia varios errores de grabacion por maxpos ntk etc), se esperan mas test
-19-03-2022 Loop infinito para una pista aislada con repeticiones internas al loop.
-19-03-2022 Repeticiones de N veces de un grupo de compases en pista aislada tipo Roll
-18-03-2022 seleccion de octavas se oculta octava de control y se usa convencion
 comenzando en 0, en vez de la menos usada comenznado en -1 
-16-03-2022 Fix Reproducir dejo de funcionar en Control
-16-03-2022 Fix marcar sonido no viene al frente.
-16-03-2022 Traer Editor Roll al frente luego de usar el menu.
-16-03-2022 Cancion Grabamos en archivos *.rtk el estado del sonido on/off..
-15-03-2022 fix, en cancion comenzaba a grabar en posicion 2 porque (0,181) se colocaba con MaxPos=2 tambien
-14-03-2022 llave 'S' todo o nada, fix para otros estados, con una sola llave hace todo
-14-03-2022 v4533 boton 'S' llave conmuta de suena todo a mute todo. 
-12-03-2022 checkbox para cada pista para darle sonido sin el check cadapista esta muteado
-11-03-2022 fix play de cancion cargada 2 veces,,,fix 
-10-03-2022 pierde los patch en cancion pendiente,,,,falso
-09-03-2022 fix carga archivo con datos de acorde, crash. Fix cargar un directorio de cancion equivocado
 y luego con el correcto crash. Fix Cargar de nuevo el mismo directorio.
-07-03-2022 2da etapa mas fix crash cancion, mas estable, falta ver la edicion de parametro scanal midi patch etc
 y al edicion de notas en cada pista aprece que no empiezan en posicion correcta,,,
-06-03-2022 fix carga de archivo ssin cancion cancelaba
-05-03-2022 1era etapa fix erroes de edicion de Tracks en Cancion, siguen las pruebas
-01-03-2022 FIX seleccion de pista con click en control.
-26-02-2022 Selcanal sea selecciona y deselecciona con x. Primero hay que borar
 la x que exista luego colocar la x en la seleccion deseada. Solo funciona si 
 elultimo cambio fue una x por eso se debe borrar 1ero y luego marcar.
-25-02-2022 mas correciones a SelCanal, SelPort y Selintr..a partir de ahroa se haran varios test
 par aver si sigue funcionando todas las cosas echas desde el inicio...copiar insertar etc
 -23-02-2022 estabilidad en Selcanal y Selport, indicacion de lo que habia seleccionado previamente.
 Archvo [Nuevo] se selecciona Con ALT, para no chocar con Ctrl Click para [CANALES].Correccion patch
 en PlayAll. Seleccion de intrumentos Alfa corregido. Todavia no se logra marcar lo seleccionado,
 se ve al volver a cargar la seleccion de cualquier tipo de seleccion.(replace no se entiende...) 
-22-02-2022 cancion 11-18-2021-FIXED, Se editaron las pistas y se procedio manualmente en Ctrl-M
 a corregir sobre todo la pista nro 2. Con eso anda bien con arcordes iguales.
 Siguiente paso ayuda automatica durante la insercion de notas dentro de una estructura
 de acordes automaticos. [pendiente]
-22-02-2022 se analizó el caso de falla anterior estaba mal escrito, para que el caso 
 sea considerado acordes iguales, debe estar bien encuadrado en un rectangulo lleno, no puede
 haber espacios vacios, se rellenan con silencios ligados o no ligados.
 Se debe poner silencios ligados o no ya lo veremos en otro test.
 Se cambió los silencios por otros simbolos para mejor visualizacion
 sO->@, sP->%, sI->&, sL->/, sF->//, sE->{, sX->{{, sH->#, sW->##
 Paso siguiente será tratar de ingresar silencios automaticamente a la izquierda
 dentro de un acorde de iguales a medida que se introducen notas en Ctrl-M y
 tambien a derecha. PAra ello hay que detectar que la intencion del usuario es
 hacer un acorde de iguales.Para ello 1) debe haber en una linea 2 o mas notas ligadas
 de la misma duracion.2) se este introduciento en ctrl-m notas de la misma duracion
 en las columnas donde existe notas que cumplan la condicion 1).
 
-20-02-2022 se logro que en cancion se reproduscan 3 pistas, si los
 ports (o dispositivos) son diferentes para cada pista funciona bien en general.
 Si 2 pistas usan el mismo port pero diferente canal y patch, algunas notas
 ligadas terminan antes y tocan la ultima y no se oye la siguientes a la ligadura.
 No se si se podrá corregir. Trabaja como si fuera un acorde gigante de N pistas
 donde cada acorde tendra notas iguales o diferentes de sistintas pistas, canales
 y patch, el patch se tira antes del play por canal y port y pista.
 El problema creo es qu eel algoritmo estaba preparado para un solo port
 un solo canal en todo un acorde,,,veremos o sino hasta aca llegamos y se intentara
 con threads ¿un thread por pista? ¿32 thread sincronizados? nunca hice veremos.
-20-02-2022 deberia usar un thread para cada pista y coordenarlas para
que todas toquen al mismo tiempo tal pez coordinadas por Jply
-19-02-2022 se intento de muchas formas ubicar la apertura de los ports, pero 
siemrpe da warning
abriendo ports....
midiout        0            LoopBe Internal MIDI 0
abro          LoopBe Internal MIDI 0
RTMIDI_ERROR_WARNING         0
midiout        2            VirtualMIDISynth #1 2
abro          VirtualMIDISynth #1 2
RTMIDI_ERROR_WARNING         0
En un programa aislado solo con la libreria rtmido no da ningun error y abro 2 ports,,,
(que interfiere¿?...zas), si uso solo un port tambien da error de warnig
no es por usar mas de un port...
-18-02-2022 varia smodificaciones:
 play de cancion funciona con un solo porta y varios canales en cada pista.
 O un port diferente en cada pista. osea se puede elegir una compbiancion de
 <port, canal y patch para una pista dada.>
 Sea rreglaron varios defectos como el parpadeo al terminar una ejecucion de una
 melodia (sync producia eso con  cairo).
 Se cambio el algorimto para manejar ports cargarlos grabarlos y cambiarlos
 tanto en pista aislada como cancion. Se agrego Fraccionar en pista de 
 cancion..etc etc.
-13-02-2022 no guarda bien el port ni el canal en lso archivo sde track aparentemente
 verificar porque sino solo anda si manualmente pongo un port  default
 y yo quiero abrir mas de un port ,,,,,
-12-02-2022 PlayCancion, usando un solo port toca cada pista en su canal midi ajustado
 pudiendo usar un intrumento por canal en los sinthe que ajustan canal a instrumento.
 Se ajsuto scroll horizontal durante el play de cancion no saltaba al llegar al final de pantalla
 Se corrigio en Cancion al entrar en Edit TRUE no podia volver a Edit FALSE lectura.
-08-02-2022 Se graba y se carga la inforamcion de dispositivo midi usado y el canal MIDI
-08-02-2022 se desarrollo 1era parte poder cambiar el port o dispositivo reproductor de MIDI-OUT en
una misma sesion y funciona bien, paso siguiente a ver es colocar port distintos en pistas distintas
ademas de canales...vovado a ayuda.
-07-02-2022 estado ESTUDIO DE LIBRERIA PARA LEER Y ESCRIBIR MIDIFILE,   probé y grabé
logre hacer el ejemplo en c en freebasic melodias acordes, pero trate con  notas ligadas pero es 
medio dificultoso s elogra pero no del todo y no se puede en varios casos,,,pendiente
cual camino seguir falta mas investigacion,,,
otra coas es que que solo escribe hasta fusa le agregue semifusa y garrapatea pero no las reconoce 
la libreria midilib , pero tampoco parece que casi no se usa ...pendiente...me queda duda de si 
algunso programas pueden importar una semifusa,,,,
C:\IT64\AREAWORKAUX\RtMidiC-MIDIFILE\FreeBasic
-06-02-2022 Fix nota bemol o sotenido en cifrados D/F# o D/Gb
-06-02-2022 encolumnamos los campos de inforamcion en el encabezado Compas, Factor, (Negra=60)I=60, 
 Canal Midi, Escala. (Es un Bosquejo para poder cambiarlos en el futuro con el mouse o teclado 
 seleccionandolo. O sea esto seria similar a un ToolBar que muestran y pueden modificar parametros, 
 Hay mucho espacio puede haber muchos controles y a la vista. El Paneo sera util y Volumen de la pista...)s
-05-02-2022 Seleccion de canal y grabacion en archivo del Nro de Canal en Bloque 3 graba3(1,1) ok
 para archivo roll y rtk y manejo en cancion.(grabaremos dispositivo midi usado ¿?)
Esta echo falta probar: en cancion y conversiones ...Lo qu evoy hacer tambien sera ajustar el 
Volumen de cada nota en una octava dada dibujando una curva pero sobre cada octava de ese 
movo tendre volumen ajustado por octava en una pista en edicion. Tambien podre hacer eso con el 
paneo...Volumen y paneo de cada nota de una octava...Pitch bend tambien algun dia .,,,todo se puede
pero demanda tiempo...zas!
-05-02-2022 Se anula en menu la vuelta a menu inicial menunew=0 por molesto si se queria volver a usar 
 el mismo menu habia que volver a recorrer todo, anulado.
-04-02-2022 fix al ingresar notas en Edit el pantalleo no estaba en funcion del cambio de tamaño
se uso NroCol que ahora es dinamico.
-04-02-2022 1er paso para cambio de canal es cambiar el formato del archivo con mas capacidad. 
 1ero Cambiamos grabacion, luego conversion lectura al viejo formato y grabacion al nuevo,,luego 
cambiamos codigo lectura y ya está completo toda la conversion al nuevo formato.
-04-02-2022 CAMBIO DE CANAL, EN ESPECIAL CANAL 10 DRUMS SELECCION DE CANAL PARA LA PISTA O TRACK 
 para ello necesitamos mas bloques en el comienzo del archivo como grabaPos o grabaLim. colocaremos
varios bloques para futura informacion.Cada bloque de 'dat' tiene 6 campos ubyte.Agregaremos info de canal
de nro midi out,nro midi in,tipo de compas,etc.Para esto agregamso 2 bloque adicionales,graba3 y graba4.

-03-02-2022 fix estabilidad para entrar en Edicion, pulsar [Edicion] luego Edit y la edicion quedara estable con
un solo click. Para salir de edicion dar otro click en Edit. Ya no se podra entrar mas a Edit, para ellos
pulsar en la mitad derecha de la cinta aparece el menu y empezar de nuevo desde [Edicion].
-03-02-2022 fix  si uso trasponer sobre un acorde automatico ya no se pierde la info de Cifrado.Logicamente
solo tienen sentido en la octava que se agrego el cifrado.
 en las lineas invidibles donde se graba habria que no tocar la info y ademas ir aumentando o disminuyendo el 
valro de la nota a medida que trasponemos,,,,,
-03-02-2022 FIX <multikey(SC_CONTROL) AND SC_T> SE DISPARABA SOLO Y ME PONIA TRASPONER EN 1 LUEGO DE 
PULSAR SC_CONTROL AND WHEEL (lockip). Parece hay una zona de superposicion que cambia el buffer,
ergo para trasponer deje de usar CONTROL pase a usar ALT y todo anda bien,,,,INEXPLICABLE LOS ERRORES
DE DETECCION DE TECLADO SERA POR EL USO DE CAIRO? O FREEBASIC ERROR¿? EN FIN ME HaCE PERDER TIEMPO ..
tambien pasaba si usaba screenevent con hexadecimnal 80..LA DETECCION DE TECLADO ES PROBLEMATICA EN FREEBASIC
ME TIENE cansado ja, VOY A TENER QUE USAR MAS LA TECLA ALT Y/O ALTERNAR CON CONTROL...
-02-02-2022 Seguimos con C/x ...para escala C ya funiona!, pase a escala mayor G no anda corregir el algoritmo
 ejemplo usado en G -> 8-I-C-D.roll
 fix trasponer andaba cuando no sele pedia... con flechas arriba abajo raro...
-01-02-2022 SE PASO NA to NA-13 en algunos donde haga falta...y pendiente hay que ver todos los move e insert
 de datos si movemos algo que tiene controle se debe mover tambien los otros campos ademas de dur y nota
 o sea vol, pb, inst etc...pendiente pendiente....(movedato, moveresto por ejemplo) o sea estoy movimientos
si debe incluir hasta NA completo pero ademas faltaria mover mas datos de control por ejemplo.
OJO YA CAMBIE NA POR NA-13 EN TODO RECALCOMPAS DE NUEVO 
-30-01-2022  Seguimos con C/x ....(ver si recalcompas podemos limitar NA-13 porque no andubo bien 
 pero deberia andar,,,no debe barrar desde NA-13 to NA no hace falta...)
-30-01-2022 se redujo el ancho del cursor de 3/4 a 1/4 delacnhco de la figura-
-30-01-2022 FIX:se arreglo trasponerRoll para pasozona1 y 2, se reubico el comando por eso dejo de andar. 
 SE CORRIGIO trasponer con ALT+click que pone nota=13..ya anda y tambien traspone en todas las octavas.
-30-01-2022 se empezo a poner la nota x en cifrado C/x en las inversiones esta a medio camino, pero saltó que no
funcionaba ningun trasponer, 
-30-01-2022 El undo para copiar tambien se hace con Alt-U por columna con cada pulso.
-30-01-2022 Fixed:Copiar una zona antes de MaxPos N veces corregido empezaba por 2da posicion desde la 1era de la zona.
Test se copio 500 veces IIIIII-500-veces-ACORDEDE2-AF+F+F+F-OK-MALPLAY-REVISAR.roll
se genero la version rtk
IIIIII-500-veces-ACORDEDE2-AF+F+F+F-OK-MALPLAY-REVISAR.rtk
Se paso a UBYTE desde integer los ticks de poli de ese modo *.rtk ahora es unpoco menor a *.roll
pero tiene mas datos el ticks de cada duracion de notas, con eso se podra reconstruir la secuencia en ticks.
-29-01-2022 RecalCompas fixed. 
-29-01-2022 vuelta atras con modi por recalcompas to NA-13 produce mal barrido. se debera buscar otra la razon
 de la falla de recalcompas en ciertos casos. Se pensó seria el tomar lso valores de control de cifrado de acorde
 y escalas como valores a procesar por recalcompas, puede ser pero ademas hay algo mas que se debe encontrar que
 afecta al barrido....fixed en vez de cortar el barrido por encima de los controles no se lso procesa
      For i= NB To NA  ' 29-01-2022 vuelta atras 
      If Roll.trk(j,i).pb = 202 Or Roll.trk(j,i).pb=201 Or Roll.trk(j,i).dur=200 Then
         Continue for
      EndIf

-29-01-2022 se recrearon *.rtk, para ello en una version anterior se agrego rtk a roll como nuevo menu
 tambien en la version actual. Con la version vieja(25 de mi control) se paso a roll y con la version nueva
se paso de roll a track. Nuevo en menu Archivo->"Grabar una pista rtk a roll TrackaRoll".
Los archivos rtk que tenian su archivo roll se los borro y recupero grabando de nuevo como rtk.
-29-01-2022 Se corrigio barrido de recalcompas hasta NA-13 (no marcaba bien)
 se probo en cancion agregar cifrado de acorde grabar a los rtk y volver a cargar funciona ok.

-[27-01-2022] Se agrego una octava mas a los archivos *.rtk se verificaron  las rutinas de conversion
 transformacion trak a roll y viceversa guardar todo lo de escalas y acordes en track y poder pasarlos a Roll
 y viceversa.Todos los archivos actuales de rtk no servirán más hay que borrarlos todos y rehacer probando
 el nuevo formato y las conversiones, o cargarlos con la version anterior del programa y grabarlos como *.roll.
 Grabar y cargar Roll con escalas y acordes anda ok, rollaTrack de menu al cargar el track [00]
 recupèra bien las escala y cifrados de acorde de track a Roll ok.(falta ver que pasa en cancion)

-[27-02-2022] Se volvio a usar otro Thread para dibujar la pantalla (lo eliminaba para debug)
 Se agrego la sub 'barrePenta' para que en un llamado al nuevo thread barra todas las octavas.
-26-01-2022 Acordes 6 y Sus2
-26-01-2022 Borrar cifrado de acorde al borrar acorde...con ALT-Backspace, pulsar 1ero Backspace o retroceso
 luego pulsar ALT. ok
-26-01-2022 Se minimizo interferencia entre lso comandos Ctrl-click derecho acordes, y Ctrl+variables 
 para interlineado.(como ctrl es comun conviene pulsarlo despues o bien simultaneo con la otra accion )ok
-26-01-2022 Fix Superposicion escalas y cifrado de acorde.Ej ok 8-I-C.roll ok
-26-01-2022 Colocar Recordatorio. un acorde con sexta no es lo mismo qu eun acorde de sexta
   1er caso es una tension CEG, la sexta es A. Pero en la musica clasica acorde de sexta 6 
   es para la 1era inversion!!!(teoria de mierda no se ponen de acuerdo ja) Ergo un acorde de sexta
   es tanto la 1er inversion como la tension, o sea CEGA entre C y A hay una sexta. PEro en EGC
   la distancia entre E y C tambien es una sexta ambos tienen razón. O sea la 1er inversion es un caso
   Particular de acorde de sexta, siempre y cuando la 3era sea el sonido mas grave aun si se repiten notas.
-25-01-2022 fix modificacion RollMusic.ini, habia valores que no guardaba al modificacion font y nanchofig
 8-I-C.roll archivo ejemplo para esto y para cifrado de acordes.
-25-01-2022 se acomodó PlayAll para que no toque la octava que no se usa (NB to NA -13)
-25-01-2022 guardar nombre o cifrado del acorde solo en la octava en uso , funciona ok para 'No Inversion' 
  en PlayAll, solo se ve  el cifrado del acorde si se pasa el mouse por encima de la octava 
  (a mi me gusta asi no se, podra cambiar en el futuro.. ), falta las inversiones y mas acordes....
  y las otras bases o grados (qu ela nota origen sea una 3era 5 7 9 11 no se si vale la pena hacerlas, lo comun
  es que la nota de la melodia sea la mas aguda generalmente se usa 1era inverison... y la repeticion de la 
  fundamnetal 1 octava mas abajo)
-24-01-2022 fix escalas auxiliares y alternativas estaban dentro de la info de notas...
-21-01-2022 S3=0 debe estar para cancioncargada  sino empieza el titileo del grafico.
lo condicione con cancioncargada para que este siempre con cancion cargada...veremos..en prueba...
-20-01-2022 dar un click al cargar archivos o pistas...
-20-01-2022 Comandos de borrado de notas o columna en modo cursor no funcioan bien, se han comentado en Ayuda
 mejor usar para borrado de columna la opcion en el modo lectura y para nota en modo cursor pulsar 9 luego X. 
(Todos los comandos habria que revisarlos uno por uno con mas detalle algun dia.....) 
Fix Se mejoró la posicion del cursor al entrar notas en modo EDIT y luego pasar al modo lectura, antes iba siempre 
al final de la secuencia noviendose el resto. Mejoró  no del todo pero ahora recuerda la posicion de lectura anterior,
antes de la edicion no exacta pero proxima. (se agregó para ello, un nuevo estado(2) para S3 (0,1,2) asi ahora es un 
proceso de 3 pasos.Pero S3=0 debe estar para cancioncargada  sino empieza el titileo creo del grafico.
lo condicione con cancioncargada para que este siempre con cancion cargada...veremos..
Fix La posicion de lectura empezaba desde 2 por el arreglo anterior, se corrigió es donde la posicion si debe valer 0,
y no 1 como en el resto.  
-20-01-2022 undo de hasta 500 acordes. Por ahora se borra de a uno con ALT-BACKSPACE hacia atras pero no hay rehacer.
    se agregaron acordes Menor7b5,Dom7,Dom75a,Dis7, todos fundamental 1era, 2da y 3era inversion para cuatriadas.
-16-01-2022 evitamos crash en la carga de *.rtk en rol si se cancela el dialogo
-16-01-2022 se ajusto mejor en el play el movimiento de las marcas [] durante el play
-16-01-2022 eliminacion de retardos que bajan performance, en el grafico y en el Play
-16-01-2022 error de play cancion crash fixed, al pulsar la key inicio o home se posicionaba en posicion=0
 y eso daba crash por fuera de indice debe ser siemrep posicion=1 en algunos casos podria ser posicion=0
 hay que verfificar lso casos...
-16-01-2022 se paso a Mousebuttons and 1  la key para [Edicion], y PARA borrar desde una posicion hasta el final
 conl ALT y posarse sobre MAxPos
- 16-01-2022 se corrigio al cargar Cancion que muestre automaticamente la 1er pista.
  Hay un error esporadico al usar mucho el TAB ejecutando play para cada pista y/o play de la cancion,
  luego en un momento hay un crash ..error pendiente, alguan psita podria estar defectuosa por ser version vieja
  o veremos....pendiente...
-15-01-2022 elimino GtkListBox ,sigh_button_event,sigh_print_selection de GTK no lo uso no me gusto
-15-01-2022 RollaTrack y GrabarRollaTrack usan la misma sub RollTempaTrackTemp para unificar codigo
 pero eso trae aparejado hacer 2 copias de la pista durante FraccionarDur o AutoFracTodoDur en memoria 
 con RollaTrack, si este tiempo es excesivo (seria el doble..) , volveriamos a la original RollaTrack_ORIGINAL 
 LA CUAL FUE GUARDADA en el codigo aunque no se use, si se vuelve a usar verificar que este al dia y correcta...
-15-01-2022 copia de datos de control de Track ocurrencia 13, a Roll, en TrackaRoll.
-15-01-2022 copia de datos de control de Roll a Track ocurrencia 13, en RollaTrack.
-15-01-2022 se agrega una ocurrencia mas al vector Track para guardar datos de control,lim3=13
-13-01-2022 se agrega insertar en posicion una escala alternativa a la escala principal probada ok
-13-01-2022 se agrega ver escala principal de Tracks al usar TAB para conmutar de track No probado
-12-01-2022 acordes m7 automaticos no inv,1era inv,2da inv, 3er inv. probado
-12-01-2022 se agrego FactortiempoPatron solo para cambiar la velocidad de ejecucion no se graba en archivo.
-11-01-2022 se ajusto la independencia de la escala de la secuencia y las auxiliares ,se graban y recuperan
-09-01-2022 undo para entrada de melodia en Edit 5000 notas de undo. El vector se inicializa al 
pasar de un track a otro en cancion, y al grabar un archivo. O sea mientras no se grabe o pulse TAB
se podrá ahcer undo de melodia, nada mas por ahora. ALT-U undo melodia
-09-01-2022 undo para el ultimo acorde automatico Alt-U (ALT-U tambien borra melodia de a una posicion
 por lo tanto se va borrando la melodia y el ultimo acorde)

-09-01-2022 al entrar un acorde automatico se toca para escucharlo, la posicion no se mueve.
-09-01-2022 Fix error cargar archivo y luego una cancion, ahroa funciona. dio error alguna vez
            en monitoreo.(*)
-08-01-2022 ERROR aleatorio,pasó 1 vesz,-> al grabar luego de dar NUEVO y cargar notas, el play no funciona porque 
            se va a Maxpos  si pulsamos inicio se va al inicio pero al tocar vuelve a maxpos y no ejecuta nada, 
            revisar Nuevo..
 se cambio comando NUEVO a Ctrl-click con un and veremos...en monitoreo (*)
-08-01-2022 triadas automaticas disminuidas con y sin inverion 1 y 2
-08-01-2022 grabamos y recuperamos tempo en los archivos
- tiempoPatron a entero no tiene porque ser double, se graba en archivo
- Se agrego formar acordes aun sin nota en el lugar elegido, se deb eentrar al duracion
- Triadas desde Tonica completo Mayor Menor Disminuido formacion y play 
- fix consumo cpu S5=2 y fueradefoco=0 eliminado
- Funciona Acorde en Tonica triaca,,Ctrl+clik derecho luego seguir con mayor hasta no inversion
- SE ELIMINO DE 'Q' la configuracion de tamaños, proporciones y font
- se agrego nverEscalasAuxiliares y nanchofig a RollMusic.ini
- se agrego en Ver, si se ven o no las Escalas Auxiliares en el grafico
- paso previo para armar acordes: necesitamos poder INGRESAR CAMBIOS DE ESCALA  y guardarlos en la secuencia
 pero al tocar se saltean como si no existieran,,,al retroceder o avanzar en la secuencia se debe ir actualizando
 la escala en uso, esto permite al ingresar un acorder construirlo en base a la escala usada en ese tramo.
- YA cierra todas las sesiones de rollmusic desde control
- futuro grabar mxold y algo mas para conservar el tamaño de la ventana y el tamaño del font
  usado por el usuario !!!! OK Y AANDA
 (el borrado de columna esta defectuoso hay que dar 0 y luego 12 x en toda la octava para
 que borre mejor usaremos marcas de zona para borrar.)
-fix dejo de andar marcado de zonas porque habia un exit do en Comedit=False con mousex>50
 se movio zonas dentro de mousex> 50 y luefo Comedit=false volvio a funcionar
- uso ctrl+click para ingresar notas nuevas en Edit, sino al pasar a Ctrl-M u otras acciones
  entraba notas no deseadas..
-  rooloop 2673 menu contextual acordes desarrollo 06-12-2021
-  correccion Clcik end EDIT 06-12-2021 s3=0 movido a y > 50 
-  correccion de abrir nota si menor=mayor no hace nada, al levantar click rompia todo
-  v23 fraccionar automaticamente en comEdit cursor al poner notas menores o 
  mayores en duracion a otra nota en acorde existente, tambien armar acordes desde una nota
  existente como tonica mayores menores etc,,buscar al tonica si consideramos es una 3era
  o una 5ta..
-  V22 agregamso menu contextual en lectura con click derecho para acordes falta desarrollar
-  v22  SetStateMenu(hmessages,1102,3) o  SetStateMenu(hmessages,1103,0) check items menu
-  V22 abrir nota se ajuto final dejaba una columna vacia
-  V21 SE AJSUTO MOVER LA VENTANA DRAGANDO LA CINTA SUPERIOR FUNCIONA MEJOR
-  V21 TREADdETACH DE tHEREADlOOP Y THREAD1 PLAY CLOSE PORTS ETC EN EL CIERRE DE CONTROL 
- V21 ESTRUCTURO ACORDESONIGUALES Y COLOCO ALLOF EN VARIAS PARTES,Q,FIN PLAY, P.
-  V19 TOCA BASTANTE BIEN ACORDES IGUALES CON SILENCIOS EN SU FORMACION
  Y CALCOMPAS AHROA INCLUYE SILENCIOS 
-  v14 ...AOI-NUEVO PERFECTO TODOS LOS ACORDES IGUALES EN ACORDES TODAS LAS POSICIONES DBEN ESAR LLENAS
  CON NOTAS CON SONIDO O SIN SONIDO PERO TODOS CON LA MISMA CANTIDAD DE NOTAS POR AHORA UNAS PODRAN SONAR
  OTRAS NO SEGUIR CON MAS PREUBAS...ANDA OK CON LOS POCOS CASOS QUE TENGO...
-  V10 FRACCIONADOR divido la nota seleccionada en n partes 
-  v8 fix nucle dur=0 nota=181 sino el borrado de notas anda mal
  toda celda debe tener 0,181 nada de 181,181...eso se cambio
-  V7 CRASH DE SPACE EN PLAY, Y VER ACORDES DISTINTOS SI SE PUEDE CAMBIAR UNA NOTA LARGA
  EN 2 CORTAS AUTOAMTICAMENTE PARA PONER EN ACORDE OTRAS 2 MAS CHICAS EL:
  P    ==> L+I* || DISCERNIR (1) |P|     DE (2)| P   |
  L+I      L+I                   |L| I         | L I |
  EL ULTIMO CASO (2) NO SE PUEDE EN ROLL , EL (1) SI
  O SEA QUE EL PROGRAMA AUTOMATICAMNETE PARTA UNA NOTA LARGA COMO P I O ETC
  FRENTE A OTRAS EN ACORDE MAS CHICAS Y UNIDAS O NO...
-  V5 CORREGIDO, V6 CORREGIDO OTRAS COSAS,,QUEDA CRASH DE PLAY CON SPACE...
-  08-11 V5 anda mejor qu ela V4 solo que la ligadura I+I+I la toca como I+I
-  LE FALTA UNA NEGRA DE DURACION, EL RESTO LO TOCA BIEN!!!
-  SIN TOCAR CASI NADA SOLO ELIMINAR EL ANALISIS DE LIGA EN PLAYALL
  SEGUIR CORREGIR CON EL USO DE LSO CAMPOS NUEVOS Y AL TERMINAR 
  ELIMINAR LOS CAMPOS DE VEC QUE NO SE USEN
